(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1004:function(e,t,n){"use strict";var a=n(5),r=n(18),i={createMsgJson:function(e,t,n){return{status:t,response:n,message:e}},sendMsgIos:function(e){try{var t,n;null===(t=window.webkit.messageHandlers)||void 0===t||null===(n=t.loginEvents)||void 0===n||n.postMessage(e)}catch(e){}},sendMsgAndroid:function(e){try{window.JSBridge.showMessageInNative(JSON.stringify(e))}catch(e){}},sendMsgUnity:function(e){try{window.Unity.call(JSON.stringify(e))}catch(e){}},getPlatformNameQueryString:function(){var e=a.a.parseQueryString()||{},t=null==e?void 0:e.platform;if(t&&t.length)return t},extLoginMessageHash:function(e){return"login"===e?this.createMsgJson(Object(r.e)("web__info__ums__EXTERNAL_AUTH_LOGIN_SUCCESS_MESSAGE"),"login","success"):"registered"===e?this.createMsgJson(Object(r.e)("web__info__ums__EXTERNAL_AUTH_REGISTRATION_SUCCESS_MESSAGE"),"registered","success"):"failed"===e?this.createMsgJson(Object(r.e)("web__info__ums__EXTERNAL_AUTH_LOGIN_FAILED_MESSAGE"),"failed","error"):null},sendMsgToPlatform:function(e,t){switch(e){case"ios":this.sendMsgIos(t);break;case"android":this.sendMsgAndroid(t);break;case"unity":this.sendMsgUnity(t)}}};t.a=i},1016:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(2),r=n.n(a),i=n(0),s=n.n(i),o=n(20),u=n.n(o),c=n(7),l=["ERR_UM_137","ERR_UM_134"],d=["ERR_UM_071","ERR_UM_099","UMSP_601"],f=n(84),g=function(){var e=r()(s.a.mark((function e(t){var n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,e.t0){e.next=5;break}return e.next=4,c.a.getUserToken();case 4:e.t0=e.sent;case 5:return e.t1=e.t0,e.t2=c.a.getDeviceID(),e.t3=c.a.generateUUID(),n={userIdentity:e.t1,deviceId:e.t2,uuid:e.t3},a=!1,e.prev=10,e.next=13,u.a.restCall("getPhoneLinkingStatus",n);case 13:e.next=19;break;case 15:e.prev=15,e.t4=e.catch(10),r=e.t4.errorCode,l.includes(r)?a=!0:d.indexOf(r)>-1&&f.a.logOut({});case 19:return e.abrupt("return",Promise.resolve(a));case 20:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()},1055:function(e,t){e.exports={ERR_UM_036:{analyticsTitle:"Incorrect Password"},ERR_UM_059:{analyticsTitle:"Max login attempt reached"}}},1317:function(e,t,n){"use strict";var a=n(4),r=n.n(a),i=(n(9),n(32),n(60)),s=n(914),o=function(e){var t=e.userIdentity,a=e.onAnotherAccountClicked,o=e.height;return r()(i.a,{loader:function(){return Promise.all([n.e(0),n.e(49)]).then(n.bind(null,1589))},showBlocker:s.a,userIdentity:t,onAnotherAccountClicked:a,height:o})};o.defaultProps={userIdentity:"",onAnotherAccountClicked:function(){},height:""},t.a=o},2070:function(e,t,n){"use strict";n.r(t);var a,r=n(4),i=n.n(r),s=n(9),o=n.n(s),u=n(94),c=n.n(u),l=n(10),d=n(84),f=n(24),g=n(923),E=n(11),p=n.n(E),v=n(13),O=n.n(v),y=n(25),S=n.n(y),h=n(26),m=n.n(h),_=n(17),I=n.n(_),b=(n(32),n(5)),T=n(1317),P=n(914),N=n(876);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=I()(e);if(t){var r=I()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var L=Object(s.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(108)]).then(n.bind(null,2077))})),w=function(e){S()(n,e);var t=R(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).onCloseModal=function(){a.props.globalAction.hideSignInModal.defer(!0)},a.isModalVisible=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.globalStore,n=t.signInModalData,a=void 0===n?{}:n;return a.show||!1},a.showPhoneLinkBlocker=function(){var e=a.props.pnlStore;return(e=void 0===e?{}:e).viewType===N.f.LOGIN_BLOCKER&&Object(P.a)()&&!b.a.isSubsWeb()},a.showModal=!1,a.countryCode=b.a.getWebsiteCountry(),a}return O()(n,[{key:"shouldComponentUpdate",value:function(e){var t=e.pnlStore.viewType,n=this.props.pnlStore.viewType;return this.showModal!==this.isModalVisible(e)||n!==t}},{key:"render",value:function(){var e=this.props,t=e.globalStore,n=e.pnlStore.userIdentity,r=t.signInModalData,u=void 0===r?{}:r,c=t.loginState,l=void 0!==c&&c;return this.showModal=this.isModalVisible(this.props),i()(o.a.Fragment,{},void 0,i()("div",{className:"signin-modal-wrapper",style:{display:this.showPhoneLinkBlocker()?"none":"block"}},void 0,this.showModal&&i()(s.Suspense,{fallback:a||(a=i()("div",{}))},void 0,i()(L,{onCloseModal:this.onCloseModal,modalState:this.showModal,loginState:l,countryCode:this.countryCode,signInModalData:u}))),this.showPhoneLinkBlocker()&&i()(T.a,{userIdentity:n}))}}]),n}(o.a.Component);t.default=function(e){return l.canUseDOM?i()("div",{className:"sign-in-container"},void 0,i()(c.a,{stores:{globalStore:d.a,pnlStore:g.a},actions:{globalAction:f.a}},void 0,o.a.createElement(w,e))):null}},876:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return f}));var a=n(1),r=n(283),i={PHONE_ENTER:"PHONE_ENTER",EMAIL_CHECK:"EMAIL_CHECK",OTP_ENTER:"OTP_ENTER",EMAIL_LOGIN:"EMAIL_LOGIN",FB_LOGIN:"FB_LOGIN",PROFILE_ENTER:"PROFILE_ENTER",SUCCESSFUL_DISPLAY:"SUCCESSFUL_DISPLAY",RESET_PASSWORD_ENTER:"RESET_PASSWORD_ENTER",RESET_PASSWORD_SENT:"RESET_PASSWORD_SENT",LOGIN_BLOCKER:"LOGIN_BLOCKER",LOGIN_HOME:"LOGIN_HOME"},s={PHONE:"phone",EMAIL:"email",FB:"facebook",MERGED:"merged"},o={PHONE_LINKED:"PHONE_LINKED",PHONE_NOT_LINKED:"PHONE_NOT_LINKED",FACEBOOK_USER_CREATION_NOT_ALLOWED:"FACEBOOK_USER_CREATION_NOT_ALLOWED"},u={viewType:i.PHONE_ENTER,usertype:s.PHONE,dialogState:a.f.PNL_DIALOG_STATE.NONE,isSignup:!1,errorMessage:"",email:"",password:"",phone:"",maskedPhone:"",otp:"",name:"",age:"",gender:"",dateOfBirth:"",resendOTPTries:0,fbMigrationStatus:"",showPlatformIcons:Object(r.b)(),deviceLoggedOutInfo:{}},c=["phone","name","email","gender","age","dateOfBirth"],l={OTPUserType:s.PHONE,userIdentity:"",fbId:"",fbToken:"",mode:"otp"},d="updatePassword",f="sign-in-ext"},897:function(e,t,n){"use strict";var a=n(11),r=n.n(a),i=n(25),s=n.n(i),o=n(26),u=n.n(o),c=n(17),l=n.n(c),d=n(50);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=l()(e);if(t){var r=l()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var g=function(e){s()(n,e);var t=f(n);function n(){var e;return r()(this,n),(e=t.apply(this,arguments)).generateActions("setPhone","setEmail","setPassword","setOTP","setName","setAge","setGender","getOTPCodeViaMsg","getOTPCodeViaCall","submitOTPCode","updateProfile","checkEmailExist","loginFB","loginEmail","sendResetPasswordEmail","goBack","navigateEmailFB","navigateForgotPassword","tryAnotherPhone","finishLogin","resendOTPCodeViaMsg","resendOTPCodeViaCall","setViewType","getOTPCallback","submitOTPCallback","updateProfileCallback","emailExistCallback","FBLoginCallback","emailLoginCallback","sendResetPasswordEmailSuccess","sendResetPasswordEmailFail","setOTPUserTypeInData","navigateFb","navigateEmail","navigatePhone","emailProfileUpdate","signupByEmail","signupByEmailSuccess","signupByEmailFailure","fireEventOnMount","hideSignInModal"),e}return n}(n(997).a);t.a=d.a.createActions(g)},914:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var a=n(8),r=n.n(a),i=n(10),s=n(5);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=n(3).a.configuration.PNL_CONFIG,l=(c=void 0===c?{}:c).LOGIN_BLOCKER,d=(l=void 0===l?{}:l).EXLUDE_ROUTES,f=void 0===d?{}:d,g=l.INCLUDED_COUNTRY,E=void 0===g?{}:g,p=l.EMAIL_BLOCKER_ENABLED,v=void 0===p||p,O=u({PAYMENTS:{route:"/subscribe/payment"},GET_STARTED:{route:"/subscribe/get-started"},PROMO:{route:"/subscribe/promo"}},f),y=u({IN:{code:"IN"}},E),S=function(){var e,t,n=i.canUseDOM?window.location.href:"";return v&&(t=decodeURIComponent(n),!Object.values(O).some((function(e){return t.indexOf(e.route)>-1})))&&(e=s.a.getWebsiteCountry(),Object.values(y).some((function(t){return t.code.toLowerCase()===e.toLowerCase()})))}},923:function(e,t,n){"use strict";var a=n(19),r=n.n(a),i=n(8),s=n.n(i),o=n(11),u=n.n(o),c=n(13),l=n.n(c),d=n(83),f=n.n(d),g=n(25),E=n.n(g),p=n(26),v=n.n(p),O=n(17),y=n.n(O),S=n(37),h=n.n(S),m=n(108),_=n(50),I=n(998),b=n(897),T=n(2),P=n.n(T),N=n(0),R=n.n(N),L=n(20),w=n.n(L),M=n(55),k=n.n(M),C=n(7),A=n(876),D=n(3),F=n(1016),U=n(914),B=n(45),G=n(22);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=D.a.configuration.PNL_CONFIG,V=void 0===j?{}:j,K=V.PNL_FLOW_V2,W=(K=void 0===K?{}:K).FB_FLOW_V2_MIGRATION_ENABLED,Y=void 0!==W&&W,J=V.COUNTRY_CODE,Q=void 0===J?91:J,X=V.TRUNK_NUMBER,q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return X&&e.charAt(0)===X?e.slice(1):e},z={getOTPCode:function(){return{remote:(e=P()(R.a.mark((function e(t,n){var a,r,i,s,o,u,c,l,d,f,g,E;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.OTPUserType,r=n.mode,i=t[a],s=t.fbMigrationStatus,o=C.a.getDeviceID(),e.next=5,C.a.getUserToken();case 5:if(u=e.sent,c=C.a.getUUID(),l="phone_".concat(r),d={userIdentity:u,deviceId:o,uuid:c},f=a===A.c.EMAIL?{email:i,device_meta:{device_name:G.a.getDeviceName()}}:{phone_number:q(i),country_prefix:"".concat(Q),device_meta:{device_name:G.a.getDeviceName()}},g={payload:f,infoPayload:{},device_meta:{device_name:G.a.getDeviceName()}},E={registerBy:l,updateInfo:!1,isGdprCountry:B.a.isGdprCountry()},!Y||s!==A.b.PHONE_NOT_LINKED){e.next=16;break}return d.userIdentity=n.userIdentity,E={verifyBy:"phone_otp",source:"phone_migration"},e.abrupt("return",w.a.restCall("verifyUser",d,f,E));case 16:return e.abrupt("return",w.a.restCall("signup",d,g,E));case 17:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)}),local:function(){return null},success:b.a.getOTPCallback,error:b.a.getOTPCallback};var e},submitOTPCode:function(){return{remote:(e=P()(R.a.mark((function e(t,n){var a,r,i,s,o,u,c,l,d,f,g,E,p,v;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.OTPUserType,r=n.mode,i=n.fbId,s=t[a],o=t.otp,u=t.fbMigrationStatus,c=C.a.getDeviceID(),l={device_meta:{device_name:G.a.getDeviceName()}},e.next=6,C.a.getUserToken();case 6:if(e.t0=e.sent,e.t1=c,e.t2=C.a.generateUUID(),d={userIdentity:e.t0,deviceId:e.t1,uuid:e.t2},f=a===A.c.EMAIL?x({email:s,verification_code:o},l):x({phone_number:q(s),verification_code:o},l),Y&&u===A.b.PHONE_LINKED&&i&&(f=x({facebook_id:i,verification_code:o},l)),g="phone_".concat(r),E={loginBy:g},!Y||u!==A.b.PHONE_NOT_LINKED){e.next=19;break}return d.userIdentity=n.userIdentity,E={source:"phone_migration"},p={phone_login_info:{phone_number:s,verification_code:o}},e.abrupt("return",w.a.restCall("updateUserInfo",d,p,E));case 19:return e.next=21,w.a.restCall("login",d,f,E);case 21:return v=e.sent,e.abrupt("return",Promise.resolve(v));case 23:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)}),local:function(){return null},success:b.a.submitOTPCallback,error:b.a.submitOTPCallback};var e},updateInfo:function(){return{remote:function(e,t){var n={deviceId:C.a.getDeviceID(),uuid:C.a.generateUUID(),userIdentity:t.userIdentity},a={age:t.age,gender:t.gender,first_name:t.fname,last_name:t.lname};return w.a.restCall("updateUserInfo",n,a,{tamperedTokenRedirect:!0})},local:function(){return null},success:b.a.updateProfileCallback,error:b.a.updateProfileCallback}},checkEmailExist:function(){return{remote:(e=P()(R.a.mark((function e(t){var n,a,r,i,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=A.c.EMAIL,r=C.a.getDeviceID(),i={id:n,type:a.toUpperCase()},e.next=6,C.a.getUserToken();case 6:return e.t0=e.sent,e.t1=r,e.t2=C.a.generateUUID(),s={userIdentity:e.t0,deviceId:e.t1,uuid:e.t2},e.abrupt("return",w.a.restCall("getLoginMethods",s,i));case 11:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),local:function(){return null},success:b.a.emailExistCallback,error:b.a.emailExistCallback};var e},loginFB:function(){return{remote:(e=P()(R.a.mark((function e(t,n){var a,r,i,s,o,u;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=C.a.getDeviceID(),r=n.fbId,i=n.token,e.next=4,C.a.getUserToken();case 4:return e.t0=e.sent,e.t1=a,e.t2=C.a.generateUUID(),s={userIdentity:e.t0,deviceId:e.t1,uuid:e.t2},o=x(x({facebook_id:r,token:i},Y?{phone_migration_enabled:!0}:{}),{},{device_meta:{device_name:G.a.getDeviceName()}}),u={loginBy:"facebook"},e.abrupt("return",w.a.restCall("login",s,o,u));case 12:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)}),local:function(){return null},success:b.a.FBLoginCallback,error:b.a.FBLoginCallback};var e},loginEmail:function(){return{remote:(e=P()(R.a.mark((function e(t){var n,a,r,i,s,o,u,c,l,d;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,r=C.a.getDeviceID(),e.next=4,C.a.getUserToken();case 4:return e.t0=e.sent,e.t1=r,e.t2=C.a.generateUUID(),i={userIdentity:e.t0,deviceId:e.t1,uuid:e.t2},s={email:n,password:a,device_meta:{device_name:G.a.getDeviceName()}},o=A.c.EMAIL,u={loginBy:o},e.next=13,w.a.restCall("login",i,s,u);case 13:if(c=e.sent,l=k()(c,"description.userIdentity",""),!Object(U.a)(l)){e.next=21;break}return e.next=18,Object(F.a)(l);case 18:e.t3=e.sent,e.next=22;break;case 21:e.t3=!1;case 22:return d=e.t3,e.abrupt("return",Promise.resolve(x(x({},c),{},{blockEmailLogin:d})));case 24:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),local:function(){return null},success:b.a.emailLoginCallback,error:b.a.emailLoginCallback};var e},signupByEmail:function(){return{remote:(e=P()(R.a.mark((function e(t){var n,a,i,s,o,u,c,l,d,f,g,E,p,v,O,y,S,h,m,_,I,b,T;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.getUserToken();case 2:return n=e.sent,a=C.a.getDeviceID(),i=C.a.getUUID(),s={userIdentity:n,deviceId:a,uuid:i},o=t.email,u=t.password,c=t.usertype,l=t.name,d=t.age,f=void 0===d?"":d,g=t.gender,E=void 0===g?"":g,p={email:o,password:u},v=l.split(" "),O=r()(v,2),y=O[0],S=void 0===y?"hotstar":y,h=O[1],_={first_name:S,age:f,gender:E},(m=void 0===h?"":h)&&(_.last_name=m),I={payload:p,infoPayload:_,device_meta:{device_name:G.a.getDeviceName()}},b={registerBy:c,updateInfo:!0,isGdprCountry:B.a.isGdprCountry()},e.next=15,w.a.restCall("signup",s,I,b);case 15:return T=e.sent,e.abrupt("return",T);case 17:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),local:function(){return null},success:b.a.signupByEmailSuccess,error:b.a.signupByEmailFailure};var e},sendResetPasswordEmail:function(){return{remote:(e=P()(R.a.mark((function e(t){var n,a,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a={email:n},e.next=4,C.a.getUserToken();case 4:return e.t0=e.sent,e.t1=C.a.getDeviceID(),e.t2=C.a.generateUUID(),r={userIdentity:e.t0,deviceId:e.t1,uuid:e.t2},e.abrupt("return",w.a.restCall("forgotPassword",r,a));case 9:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),local:function(){return null},success:b.a.sendResetPasswordEmailSuccess,error:b.a.sendResetPasswordEmailFail};var e}},Z=n(14),$=n(24),ee=n(1055),te=n.n(ee),ne=n(28),ae=n(275),re=n(1),ie=n(283),se=n(5),oe={getProfileFormFlowTypeForPath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=D.a.configuration,n=(t=void 0===t?{}:t).ROUTE_NAME_MAPPING,a=void 0===n?{}:n,i=e.split("/");if(i.length>2){var s="/".concat(i.slice(2).join("/")),o=Object.entries(a).find((function(e){var t=r()(e,2)[1];return"string"==typeof t&&t===s}));if(o)return o[0]}},getProfileFormFlowType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e||window.location.pathname;return this.getProfileFormFlowTypeForPath(t)||this.getProfileFormFlowTypeForPath(se.a.getQueryStringByName("returnURL")||"")}},ue=n(1004);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){s()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v()(this,n)}}var fe=D.a.configuration,ge=fe.PNL_CONFIG,Ee=void 0===ge?{}:ge,pe=fe.PROFILE_FORM_CONFIG,ve=Ee.PNL_FLOW_V2,Oe=(ve=void 0===ve?{}:ve).SHOW_LOGIN_HOME,ye=void 0!==Oe&&Oe,Se=ve.EMAIL_FLOW_V2_ENABLED,he=void 0!==Se&&Se,me=ve.FB_FLOW_V2_MIGRATION_ENABLED,_e=void 0!==me&&me,Ie=re.f.USER_TYPES,be=Ie.OLD_USER,Te=Ie.NEW_USER;function Pe(e){return function(t){var n={};for(var a in t)e(t[a],a)&&(n[a]=t[a]);return n}}var Ne=Pe((function(e){return!!e})),Re=Pe((function(e,t){return A.h.includes(t)&&!!e})),Le=function(){if("object"!==h()(pe))return!0;var e=pe.ENABLE_FOR_POPUP,t=pe.ENABLE_FOR_ROUTES,n=oe.getProfileFormFlowType();return n?t.includes(n):!!e},we=function(e){E()(n,e);var t=de(n);function n(){var e;u()(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getOTPCallback=function(t){var n=t.errorMessageV3,a=t.description,r=(a=void 0===a?{}:a).phone,i=t.httpStatus,s=t.errorCode,o=null;if(200===i||201===i)o="Success",e.setState({dialogState:re.c.NONE,maskedPhone:r,viewType:A.f.OTP_ENTER});else{o="Submit Failed";var u=e.buildErrorMessage(n,s);e.setState({dialogState:re.c.ERROR,errorMessage:u})}e.state.resendOTPTries>0?ne.a.fireResendOTPEvent({noOfTries:e.state.resendOTPTries,otpType:"otp"===e.data.mode?"SMS":"Call"}):ne.a.fireSubmittedPhoneNumberEvent({pageTitle:"Enter Phone Number",response:o})},e.submitOTPCallback=function(t){var n=t.httpStatus,a=t.description,r=(a=void 0===a?{}:a).userIdentity,i=a.deviceLoggedOutInfo,s=void 0===i?{}:i,o=t.errorCode,u=t.errorMessageV3,c=null;if(201===n||200===n){var l=s.is_device_logged_out,d=s.entitlement_info,f=void 0===d?{}:d,g=f.is_upgradeable,E=f.context,p=void 0===E?{}:E,v=f.failed_capabilities,O=void 0===v?[]:v;e.userType=200===n?be:Te;var y=Z.a.getSubsDataFromJwt(r),S=y.sub,h=(S=void 0===S?{}:S).extAuthId,m=!y.name&&!h,_=e.data.fbId&&!h,I=m&&Le()?A.f.PROFILE_ENTER:A.f.SUCCESSFUL_DISPLAY,b=201===n,T=Object(ie.a)(),P={context:p,failed_capabilities:O};e.data.userIdentity=r,T&&e.setentitlementInfo(P),e.setState((function(){return le(le({},Re(y)),{},{dialogState:re.c.NONE,isSignup:b,viewType:I,deviceLoggedOutInfo:T?{isDeviceLoggedOut:l,isUpgradable:g}:{},pspContext:P})}),e.finishLogin),m||_&&(_e||e.updateProfileWithFB()),c="Success"}else{var N=e.buildErrorMessage(u,o);e.setState({dialogState:re.c.ERROR,errorMessage:N}),c=401===n?"Invalid":"Submit Failed"}ne.a.fireSubmittedOTPEvent({otpType:"otp"===e.data.mode?"SMS":"Call",pageTitle:"Enter OTP",response:c})},e.finishLogin=function(){var t=e.state,n=t.email,a=t.age,r=t.gender,i=t.dateOfBirth,s=t.deviceLoggedOutInfo,o=e.data,u=o.fbId,c=o.fbToken,l={description:{userIdentity:o.userIdentity},facebookObj:{deviceId:C.a.getDeviceID(),fbId:u,emailId:n,isProfileRequired:!1,token:c,dateOfBirth:i,age:a,gender:C.a.getGender(r)},isPNL:!(window&&window.location&&window.location.href&&/returnURL/g.test(window.location.href)),userType:e.userType,autoDismissModal:!(null!=s&&s.isDeviceLoggedOut)};e.userType===Te?setTimeout((function(){return $.a.signupSuccess(l)}),0):setTimeout((function(){return $.a.loginSuccess(l)}),0)},e.emailProfileUpdate=function(t){var n=A.f.PROFILE_ENTER;e.setState((function(){return{dialogState:re.c.NONE,isSignup:!0,viewType:n,usertype:t}}),e.finishLogin)},e.updateProfileCallback=function(t){var n=t.httpStatus,a=t.description,r=(a=void 0===a?{}:a).userIdentity,i=t.errorCode,s=t.errorMessageV3,o=null;if(200===n||201===n){if(se.a.getCurrentRoute()===A.a){var u=ue.a.getPlatformNameQueryString(),c=ue.a.extLoginMessageHash("registered");ue.a.sendMsgToPlatform(u,c)}o="Success";var l=Z.a.getSubsDataFromJwt(r);e.data.userIdentity=r,e.setState(le(le({},Re(l)),{},{dialogState:re.c.NONE,viewType:A.f.SUCCESSFUL_DISPLAY}))}else{o="Submit Failed";var d=e.buildErrorMessage(s,i);e.setState({dialogState:re.c.ERROR,errorMessage:d})}ne.a.fireSubmittedAboutYouEvent({enteredValueName:e.data.fname,enteredValueAge:e.data.age,enteredValueGender:e.data.gender,pageTitle:"About You",response:o,userType:e.userType})},e.emailExistCallback=function(t){var n=t.description,a=(n=void 0===n?{}:n).exists,r=n.usertype,i=t.errorCode,s=t.errorMessageV3,o="Success";if(!1===a)he?e.setState({dialogState:re.c.NONE,isSignup:!0,viewType:A.f.EMAIL_LOGIN}):e.setState({dialogState:re.c.NONE,isSignup:!0,viewType:A.f.PHONE_ENTER});else if(r===A.c.PHONE)e.data.OTPUserType=A.c.EMAIL,e.getOTPCodeViaMsg();else if(r===A.c.EMAIL||r===A.c.MERGED)e.setState({dialogState:re.c.NONE,usertype:r,viewType:A.f.EMAIL_LOGIN});else if(r===A.c.FB)e.setState({dialogState:re.c.NONE,usertype:r,viewType:A.f.FB_LOGIN});else{o="Submit Failed";var u=e.buildErrorMessage(s,i);e.setState({dialogState:re.c.ERROR,errorMessage:u})}ne.a.fireSubmittedEmailEvent({enteredEmail:e.state.email,pageTitle:"Alternate Login Methods",response:o})},e.FBLoginCallback=function(t){var n,a,r=t.httpStatus,i=t.description,s=(i=void 0===i?{}:i).userIdentity,o=t.errorCode,u=t.errorMessageV3,c=t.status,l=t.phone,d=null,f=A.f.PHONE_ENTER;if(_e){var g=!1;200===r?(d="Success",e.userType=be,e.data.userIdentity=s,c===A.b.PHONE_LINKED?(a=c,f=A.f.OTP_ENTER):c===A.b.PHONE_NOT_LINKED&&(a=c,g=!0,f=A.f.PHONE_ENTER)):406===r?(a=A.b.FACEBOOK_USER_CREATION_NOT_ALLOWED,d="Success",g=!0,f=A.f.PHONE_ENTER,e.userType=Te,e.resetFbToken()):(d="Submit Failed",n=e.buildErrorMessage(u,o),ye&&(f=A.f.LOGIN_HOME));var E="Success"===d;e.setState(le(le(le({isSignup:g,dialogState:E?re.c.NONE:re.c.ERROR,viewType:f,phone:""},l?{maskedPhone:l}:{}),{},{fbMigrationStatus:a},E?{errorMessage:n}:{}),n?{errorMessage:n}:{}))}else if(200===r||201===r){d="Success",e.userType=be;var p=Z.a.getSubsDataFromJwt(s);e.data.userIdentity=s,e.setState(le(le({},Re(p)),{},{dialogState:re.c.NONE,usertype:A.c.FB,viewType:A.f.SUCCESSFUL_DISPLAY,phone:""}),e.finishLogin)}else 406===r?(d="Success",e.userType=Te,e.data.userIdentity=s,e.setState({isSignup:!0,dialogState:re.c.NONE,viewType:A.f.PHONE_ENTER,phone:""})):(d="Submit Failed",n=e.buildErrorMessage(u,o),e.setState({dialogState:re.c.ERROR,errorMessage:n}));ne.a.fireSubmittedFacebookEvent({enteredEmail:e.state.email,pageTitle:"Alternate Login Methods",response:d})},e.shouldOverrideLoginViewState=function(e){var t={};return e&&(t.viewType=A.f.LOGIN_BLOCKER),t},e.emailLoginCallback=function(t){var n=t.httpStatus,a=t.description,r=(a=void 0===a?{}:a).userIdentity,i=t.errorCode,s=t.errorMessageV3,o=t.blockEmailLogin,u=null;if(201===n||200===n){u="Success",e.userType=200===n?be:Te;var c=Z.a.getSubsDataFromJwt(r),l=e.shouldOverrideLoginViewState(o);e.data.userIdentity=r,e.setState(le(le({},Re(c)),{},{dialogState:re.c.NONE,viewType:A.f.SUCCESSFUL_DISPLAY,phone:"",userIdentity:r},l),e.finishLogin)}else{var d=e.buildErrorMessage(s,i);e.setState({dialogState:re.c.ERROR,errorMessage:d}),u=te.a[i]&&te.a[i].analyticsTitle||"Submit Failed"}ne.a.fireSubmittedPasswordEvent({enteredEmail:e.state.email,pageTitle:"Enter Password",response:u})},e.sendResetPasswordEmailSuccess=function(t){t.success?(e.setState({dialogState:re.c.NONE,viewType:A.f.RESET_PASSWORD_SENT}),ne.a.fireResetPasswordEvent({enteredEmail:e.state.email,pageTitle:"Forgot Password",response:"Success",source:"Forgot Password"})):e.sendResetPasswordEmailFail(t)},e.sendResetPasswordEmailFail=function(t){var n=t.errorMessageV3,a=t.errorCode,r=e.buildErrorMessage(n,a);e.setState({dialogState:re.c.ERROR,errorMessage:r}),ne.a.fireResetPasswordEvent({enteredEmail:e.state.email,pageTitle:"Forgot Password",response:"ERR_UM_020"===a?"Invalid Email":"Submit Failed",source:"Forgot Password"})},m.canUseDOM&&(window.strUtils=Z.a,window.PNLStore=f()(e)),e.state=A.e,ye&&(e.state.viewType=A.f.LOGIN_HOME),e.data=A.d,e.bindActions(b.a),e.exportAsync(z),e}return l()(n,[{key:"setPhone",value:function(e){this.setState({phone:e})}},{key:"setEmail",value:function(e){this.setState({email:e})}},{key:"setPassword",value:function(e){this.setState({password:e})}},{key:"setOTP",value:function(e){this.setState({otp:e})}},{key:"setName",value:function(e){this.setState({name:e})}},{key:"setAge",value:function(e){this.setState({age:e})}},{key:"setGender",value:function(e){this.setState({gender:e})}},{key:"setViewType",value:function(e){this.setState({viewType:e})}},{key:"goBack",value:function(){var e=this.state,t=e.viewType,n=e.isSignup,a=e.email,r=e.usertype,i=e.fbMigrationStatus,s=void 0===i?"":i,o=this.data.fbId,u=t,c=r,l=n,d=!1;switch(t){case A.f.PHONE_ENTER:l=!1,ye?(u=A.f.LOGIN_HOME,d=!0,this.resetFbToken()):u=n&&o?A.f.FB_LOGIN:A.f.EMAIL_CHECK;break;case A.f.EMAIL_CHECK:ye?(u=A.f.LOGIN_HOME,this.resetFbToken()):u=A.f.PHONE_ENTER;break;case A.f.OTP_ENTER:s===A.b.PHONE_LINKED?(d=!0,u=ye?A.f.LOGIN_HOME:A.f.PHONE_ENTER,l=!1,this.resetFbToken()):u=this.data.OTPUserType===A.c.EMAIL?A.f.EMAIL_CHECK:A.f.PHONE_ENTER,this.data.OTPUserType=A.c.PHONE;break;case A.f.EMAIL_LOGIN:c=A.c.PHONE,u=A.f.EMAIL_CHECK;break;case A.f.PROFILE_ENTER:a||o||(l=!1),u=he&&c===A.c.EMAIL?A.f.EMAIL_LOGIN:A.f.OTP_ENTER;break;case A.f.RESET_PASSWORD_ENTER:u=A.f.EMAIL_LOGIN;break;case A.f.FB_LOGIN:c=A.c.PHONE,u=A.f.EMAIL_CHECK;break;case A.f.RESET_PASSWORD_SENT:u=A.f.RESET_PASSWORD_ENTER}this.setState(le({dialogState:re.c.NONE,isSignup:l,viewType:u,usertype:c},d?{fbMigrationStatus:""}:{}))}},{key:"resendOTPCodeViaMsg",value:function(){this.setState((function(e){return{resendOTPTries:e.resendOTPTries+1}}));var e=this.state.fbMigrationStatus;if(_e){var t=this.data,n=t.fbId,a=t.fbToken;e===A.b.PHONE_LINKED?this.getInstance().loginFB({fbId:n,token:a}):this.getOTPCodeViaMsg()}else this.getOTPCodeViaMsg()}},{key:"getOTPCodeViaMsg",value:function(){return this.data.mode="otp",this.getOTPCode()}},{key:"resendOTPCodeViaCall",value:function(){this.getOTPCodeViaCall()}},{key:"getOTPCodeViaCall",value:function(){return this.data.mode="ivr",this.getOTPCode()}},{key:"getOTPCode",value:function(){return this.setState({dialogState:re.c.GET_OTP_LOADING}),this.getInstance().getOTPCode(this.data)}},{key:"setentitlementInfo",value:function(e){try{var t=function(){window.sessionStorage.setItem(re.f.ENTITLEMENT_INFO,JSON.stringify(le(le({},e),{},{isPure:!0,isUmsEntitlement:!0})))};if(m.canUseDOM){var n=window.sessionStorage.getItem(re.f.ENTITLEMENT_INFO);n&&(n=JSON.parse(n)).isWatchPageEntitlement||t()}}catch(e){console.error("issue in setting entitlement info",e)}}},{key:"submitOTPCode",value:function(){this.setState({dialogState:re.c.PRIMARY_LOADING}),this.getInstance().submitOTPCode(this.data)}},{key:"updateProfileWithFB",value:function(){var e=this.data,t=e.userIdentity,n=e.fbId,a=e.fbToken,r={userIdentity:t,ext_fb:n&&a?{fbId:n,token:a}:void 0};return this.updateInfo(r)}},{key:"signupByEmail",value:function(){return this.setState({dialogState:re.c.PRIMARY_LOADING}),this.getInstance().signupByEmail()}},{key:"signupByEmailSuccess",value:function(e){var t=e.description,n=(t=void 0===t?{}:t).userIdentity,a=Z.a.getSubsDataFromJwt(n);this.data.userIdentity=n,this.setState(le(le({},Re(a)),{},{dialogState:re.c.NONE,viewType:A.f.SUCCESSFUL_DISPLAY}))}},{key:"signupByEmailFailure",value:function(e){var t=e.errorMessageV3,n=e.errorCode,a=this.buildErrorMessage(t,n);this.setState({dialogState:re.c.ERROR,errorMessage:a})}},{key:"updateProfile",value:function(){var e=this.state,t=e.name,n=e.age,a=e.gender,i=e.email,s=this.data,o=s.userIdentity,u=s.fbId,c=s.fbToken,l=t.split(" "),d=r()(l,2),f=u&&c?{fbId:u,token:c}:void 0,g={userIdentity:o,fname:d[0],lname:d[1],gender:a,age:n,email:!!Z.a.getSubsDataFromJwt(o).email||"phone"===this.state.usertype?"":i,ext_fb:f};return this.updateInfo(g)}},{key:"updateInfo",value:function(e){return this.setState({dialogState:re.c.PRIMARY_LOADING}),this.getInstance().updateInfo(Ne(e))}},{key:"checkEmailExist",value:function(){return this.setState({dialogState:re.c.PRIMARY_LOADING}),this.getInstance().checkEmailExist()}},{key:"resetFbToken",value:function(){this.data.fbId="",this.data.fbToken=""}},{key:"loginFB",value:function(e){var t=r()(e,2)[1],n=t.profile,a=void 0===n?{}:n,i=t.tokenDetail,s=void 0===i?{}:i,o=a.id,u=a.email,c=a.first_name,l=a.last_name,d=a.birthday,f=a.gender,g=a.age,E=s.accessToken,p="".concat(c," ").concat(l),v={dialogState:re.c.FACEBOOK_LOADING};return _e||(v=le(le({},v),{},{name:p,email:u,age:g,gender:f,dateOfBirth:d})),this.setState(v),this.data.fbId=o,this.data.fbToken=E,this.getInstance().loginFB({fbId:o,token:E})}},{key:"loginEmail",value:function(e){var t={dialogState:re.c.PRIMARY_LOADING};return e&&(t.usertype=e),this.setState(t),this.getInstance().loginEmail()}},{key:"sendResetPasswordEmail",value:function(){return this.setState({dialogState:re.c.PRIMARY_LOADING}),this.getInstance().sendResetPasswordEmail()}},{key:"navigateEmailFB",value:function(e){var t=e.displayName,n=e.itemType;this.setState({dialogState:re.c.NONE,viewType:A.f.EMAIL_CHECK}),ne.a.fireSelectedAlternateLoginMethodsEvent(),ne.a.fireClickedItemEvent({display_name:t,item_type:n})}},{key:"navigateForgotPassword",value:function(){this.setState({dialogState:re.c.NONE,viewType:A.f.RESET_PASSWORD_ENTER})}},{key:"navigateFb",value:function(){this.setState({dialogState:re.c.NONE}),ne.a.fireInitiatedFacebook()}},{key:"navigateEmail",value:function(){this.setState({dialogState:re.c.NONE,viewType:A.f.EMAIL_CHECK}),ne.a.fireInitiatedEmail()}},{key:"navigatePhone",value:function(){this.setState({dialogState:re.c.NONE,viewType:A.f.PHONE_ENTER}),ne.a.fireInitiatedMobileNumber()}},{key:"fireEventOnMount",value:function(e){var t=e.name,n=void 0===t?"":t,a=e.title,r=void 0===a?"":a,i={name:n};r&&(i.title=r),ne.a.fireViewedPageEvent(i)}},{key:"tryAnotherPhone",value:function(){this.data.OTPUserType=A.c.PHONE,this.setState({dialogState:re.c.NONE,viewType:A.f.PHONE_ENTER})}},{key:"buildErrorMessage",value:function(e,t){var n=Object(ae.a)(t);return e||n.description}},{key:"setOTPUserTypeInData",value:function(e){this.data.OTPUserType=e}},{key:"hideSignInModal",value:function(){$.a.hideSignInModal.defer()}}]),n}(I.a);t.a=_.a.createStore(we,"PNLStore")}}]);